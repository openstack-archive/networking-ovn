- job:
    name: networking-ovn-rally-task
    parent: rally-task-at-devstack
    required-projects:
      - name: openstack/devstack
      - name: openstack/devstack-gate
      - name: openstack/rally
      - name: openstack/rally-openstack
        override-checkout: 1.7.0
      - name: openstack/networking-ovn
    irrelevant-files:
      - ^(test-|)requirements.txt$
      - ^.*\.rst$
      - ^doc/.*$
      - ^releasenotes/.*$
      - ^setup.cfg$
      - ^tools/.*$
      - ^tox.ini$
      - ^vagrant/.*$
      - ^migration/.*$
    vars:
      devstack_plugins:
        rally-openstack: https://opendev.org/openstack/rally-openstack
        networking-ovn: https://opendev.org/openstack/networking-ovn
      devstack_services:
        ovn-northd: true
        ovn-controller: true
        networking-ovn-metadata-agent: true
        br-ex-tcpdump: true
        br-int-flows: true
        q-dhcp: false
        q-l3: false
        q-agt: false
      devstack_localrc:
        PHYSICAL_NETWORK: public
        Q_USE_PROVIDERNET_FOR_PUBLIC: true
        ENABLE_CHASSIS_AS_GW: true
        OVN_L3_CREATE_PUBLIC_NETWORK: true
        OVN_BRANCH: branch-2.12
      rally_task: rally-jobs/ovn.yaml
    timeout: 7800
